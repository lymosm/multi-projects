var tdwSearch={};
(function(){tdwSearch={items:[],init:function(){tdwSearch.items=[]},item:function(){this.jqueryObj=this.blockAtts=this.blockUid=void 0;this._is_search_open=!1;this._is_live_search_active=!0;this._last_request_results_count=this._current_selection_index=0;this._first_down_up=!0;this._searchFormVersion=this._resultsLimit=void 0;this._openSearchFormClassRegular=this._openSearchFormClassDropdown="";this._is_initialized=this.isSearchFormFull=this.inComposer=!1},_initialize_item:function(a){if(!0!==a._is_initialized){jQuery(document).on("click",
function(b){jQuery("."+a.blockUid+" .tdw-search-form-input").get(0)!==b.target&&!0===a._is_search_open&&tdwSearch.hide_search_box(a)});if(""===a._searchFormVersion)a.jqueryObj.find(".tdw-search-btn").on("click",function(b){b.preventDefault();b.stopPropagation();!0===a._is_search_open?tdwSearch.hide_search_box(a):tdwSearch.show_dropdown_search_box(a)});if("regular"===a._searchFormVersion)a.jqueryObj.find(".tdw-search-form-input").on("click",function(b){b.preventDefault();b.stopPropagation();""!==jQuery(this).val()&&
tdwSearch.show_regular_search_box(a)});a._is_live_search_active&&!a.inComposer&&a.jqueryObj.find(".tdw-search-form-input").keydown(function(b){if(b.which&&39===b.which||b.keyCode&&39===b.keyCode||b.which&&37===b.which||b.keyCode&&37===b.keyCode)tdwSearch.set_input_focus(a);else{if(b.which&&13===b.which||b.keyCode&&13===b.keyCode)return b=a.jqueryObj.find(".tdw-aj-cur-element"),0<b.length?window.location=b.find(".entry-title a").attr("href"):jQuery(this).parent().parent().submit(),!1;if(b.which&&40===
b.which||b.keyCode&&40===b.keyCode)return tdwSearch.move_prompt_down(a),!1;if(b.which&&38===b.which||b.keyCode&&38===b.keyCode)return tdwSearch.move_prompt_up(a),!1;(b.which&&8===b.which||b.keyCode&&8===b.keyCode)&&1===jQuery(this).val().length&&(a.jqueryObj.find(".tdw-aj-search").empty(),"regular"===a._searchFormVersion&&tdwSearch.hide_search_box(a));tdwSearch.set_input_focus(a);setTimeout(function(){tdwSearch.do_ajax_call(a)},100);return!0}});var b=0<jQuery("."+a.blockUid).parents(".td-header-template-wrap").length;
window.tdb_globals.isAjax?b||(a.isSearchFormFull?tdwSearch.searchFormWidth(a,!0,a.inComposer):tdwSearch.searchFormWidth(a,!1,a.inComposer)):a.isSearchFormFull?tdwSearch.searchFormWidth(a,!0,a.inComposer):tdwSearch.searchFormWidth(a,!1,a.inComposer);a._is_initialized=!0}},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdwSearch.items.push(a);tdwSearch._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdwSearch.items.length;b++)if(tdwSearch.items[b].blockUid===
a)return tdwSearch.items.splice(b,1),!0;return!1},searchFormWidth:function(a,b,e){function f(){h=-d.left+"px";k.attr("style",k.attr("style")+"; left:"+h)}var c=a.jqueryObj,d,g,h,k=c.find(".tdw-drop-down-search");jQuery(window).resize(function(){var a=c.offset().left;b?(k.attr("style","width: "+jQuery("body").outerWidth()+"px !important; left: -"+a+"px;"),setTimeout(function(){d=c.offset();g=d.left;f();e&&setInterval(function(){d=c.offset();d.left!==g&&(f(),g=d.left)},1E3)},500)):k.attr("style","width: "+
jQuery("body").outerWidth()+"px !important;")});a.inComposer&&jQuery(window).resize()},show_dropdown_search_box:function(a){a.jqueryObj.find(".tdw-drop-down-search").addClass(a._openSearchFormClassDropdown);!0!==tdDetect.isIos&&setTimeout(function(){document.querySelector("."+a.blockUid+" .tdw-search-form-input").focus()},200);a._is_search_open=!0},show_regular_search_box:function(a){a.jqueryObj.find(".tdw-aj-search").addClass(a._openSearchFormClassRegular);a._is_search_open=!0},hide_search_box:function(a){""===
a._searchFormVersion?a.jqueryObj.find(".tdw-drop-down-search").removeClass(a._openSearchFormClassDropdown):"regular"===a._searchFormVersion&&a.jqueryObj.find(".tdw-aj-search").removeClass(a._openSearchFormClassRegular);a._is_search_open=!1},move_prompt_up:function(a){!0===a._first_down_up?(a._first_down_up=!1,0===a._current_selection_index?a._current_selection_index=a._last_request_results_count-1:a._current_selection_index--):0===a._current_selection_index?a._current_selection_index=a._last_request_results_count:
a._current_selection_index--;tdwSearch._repaintCurrentElement(a)},move_prompt_down:function(a){!0===a._first_down_up?a._first_down_up=!1:a._current_selection_index===a._last_request_results_count?a._current_selection_index=0:a._current_selection_index++;tdwSearch._repaintCurrentElement(a)},set_input_focus:function(a){a._current_selection_index=0;a._first_down_up=!0;a.jqueryObj.find(".tdw-search-form").fadeTo(100,1);a.jqueryObj.find(".td_module_wrap").removeClass("tdw-aj-cur-element")},remove_input_focus:function(a){0!==
a._last_request_results_count&&a.jqueryObj.find(".tdw-search-form-input").addClass("tdw-search-nofocus")},_repaintCurrentElement:function(a){a.jqueryObj.find(".td_module_wrap").removeClass("tdw-aj-cur-element");a._current_selection_index>a._last_request_results_count-1?(a.jqueryObj.find(".tdw-search-form").fadeTo(100,1),a.jqueryObj.find(".tdw-search-form-input").removeClass("tdw-search-nofocus")):(tdwSearch.remove_input_focus(a),a.jqueryObj.find(".td_module_wrap").eq(a._current_selection_index).addClass("tdw-aj-cur-element"))},
do_ajax_call:function(a){var b=a.jqueryObj.find(".tdw-search-form-input").val();""===b?tdwSearch.set_input_focus(a):tdLocalCache.exist("tdw-"+b)?tdwSearch.process_ajax_response(tdLocalCache.get("tdw-"+b),a):jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"td_ajax_search",module:"td_woo_product_module",atts:a.blockAtts,td_string:b,limit:a._resultsLimit,post_type:"product"},success:function(e,f,c){tdLocalCache.set("tdw-"+b,e);tdwSearch.process_ajax_response(e,a)},error:function(a,b,c){window.console.log(c)}})},
process_ajax_response:function(a,b){var e=b.jqueryObj.find(".tdw-search-form-input").val(),f=b.jqueryObj.find(".tdw-aj-search");""===e?f.empty():(a=jQuery.parseJSON(a),a.td_search_query===e&&(b._current_selection_index=0,b._last_request_results_count=a.td_total_in_list,b._first_down_up=!0,f.html(a.td_data),"undefined"!==typeof window.tdAnimationStack&&!0===window.tdAnimationStack.activated&&(window.tdAnimationStack.check_for_new_items(".tdw-aj-search .td-animation-stack",window.tdAnimationStack.SORTED_METHOD.sort_left_to_right,
!0,!1),window.tdAnimationStack.compute_items(!1)),"regular"===b._searchFormVersion&&tdwSearch.show_regular_search_box(b)))},hideAllItems:function(){tdwSearch.items.forEach(function(a){tdwSearch.hide_search_box(a)})}}})();jQuery().ready(function(){tdwSearch.init();setTimeout(function(){jQuery(window).resize()},500)});var tdwVariationSwitches={};
(function(a){tdwVariationSwitches={init:function(){tdwVariationSwitches.items=[]},item:function(){this.product_id=this.product_variations=this.element=this.jqueryObj=this.blockAtts=this.blockUid=void 0;this._is_initialized=this.inComposer=!1},_initialize_item:function(a){!0!==a._is_initialized&&(tdwVariationSwitches._init(a),tdwVariationSwitches._loaded(a),tdwVariationSwitches._update(a),a._is_initialized=!0)},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";
tdwVariationSwitches.items.push(a);tdwVariationSwitches._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdwVariationSwitches.items.length;b++)if(tdwVariationSwitches.items[b].blockUid===a)return tdwVariationSwitches.items.splice(b,1),!0;return!1},_init:function(b){b.element.find("ul.variable-items-wrapper").each(function(){var b=a(this).siblings("select.woo-variation-raw-select"),f=a(this).hasClass("reselect-clear"),c=a("body").hasClass("td-woo-variation-switches-mob");if(f)a(this).on("click",
"li:not(.selected)",function(d){d.preventDefault();d.stopPropagation();d=a(this).data("value");b.val(d).trigger("change");b.trigger("click");b.trigger("focusin");c&&b.trigger("touchstart");a(this).trigger("focus")}),a(this).on("click","li.selected",function(d){d.preventDefault();d.stopPropagation();b.val("").trigger("change");b.trigger("click");b.trigger("focusin");c&&b.trigger("touchstart");a(this).trigger("focus")});else a(this).on("click","li",function(d){d.preventDefault();d.stopPropagation();
d=a(this).data("value");b.val(d).trigger("change");b.trigger("click");b.trigger("focusin");c&&b.trigger("touchstart");a(this).trigger("focus")})});_.delay(function(){b.element.trigger("td_woo_variation_switches_init",[b.element,b.product_variations])},1)},_loaded:function(b){b.element.on("td_woo_variation_switches_init",function(e,f,c){f._generated=c.reduce(function(a,b){Object.keys(b.attributes).map(function(c){a[c]||(a[c]=[]);b.attributes[c]&&a[c].push(b.attributes[c])});return a},{});f._out_of_stock=
c.reduce(function(a,b){Object.keys(b.attributes).map(function(c){a[c]||(a[c]=[]);b.attributes[c]&&!b.is_in_stock&&a[c].push(b.attributes[c])});return a},{});b.element.find("ul.variable-items-wrapper").each(function(){var b=a(this).find("li"),c=a(this).data("attribute_name"),e=f._generated[c];b.each(function(){var b=a(this).attr("data-value");_.isEmpty(e)||-1!==_.indexOf(e,b)||(a(this).removeClass("selected"),a(this).addClass("disabled"))})})})},_update:function(b){b.element.on("__found_variation",
function(a,b){});b.element.on("woocommerce_variation_has_changed",function(a){});b.element.on("woocommerce_update_variation_values",function(){a(this).find("ul.variable-items-wrapper").each(function(){var b="",f=a(this).siblings("select.woo-variation-raw-select").find("option"),c=a(this).siblings("select.woo-variation-raw-select").find("option:selected"),d=a(this).siblings("select.woo-variation-raw-select").find("option").eq(1),g=a(this).find("li"),h=[];f.each(function(){""!==a(this).val()&&(h.push(a(this).val()),
b=c?c.val():d.val())});_.delay(function(){g.each(function(){var c=a(this).attr("data-value");a(this).removeClass("selected disabled").addClass("disabled");-1!==_.indexOf(h,c)&&(a(this).removeClass("disabled"),c===b&&a(this).addClass("selected"))})},1)})})},_reset:function(b){b.element.on("reset_data",function(){a(this).find("ul.variable-items-wrapper").each(function(){a(this).find("li").each(function(){a(this).removeClass("selected disabled")})})})}}})(jQuery);jQuery().ready(function(){tdwVariationSwitches.init()});
var tdwFilter={};
(function(){tdwFilter={items:[],init:function(){tdwFilter.items=[]},item:function(){this.templateDataId=this.templateType=this.loadType=this.jqueryObj=this.blockAtts=this.blockUid=void 0;this.is_ajax_running=this.isAjaxCallback=this.inComposer=!1;this.has_wp_query=!0;this._is_initialized=this.enabled_on_mobiles=!1},_initialize_item:function(a){if(!0!==a._is_initialized){if(!0===a.enabled_on_mobiles){a.jqueryObj.closest(".vc_column_container").addClass("tdw-filters-mobile");jQuery("body").addClass("tdw-filters");var b=
jQuery(".tdw-filters-button-mobile"),e=b.get(0);e=jQuery._data(e,"events");if(void 0===e||void 0===e.click)b.on("click",function(){jQuery("body").toggleClass("tdw-filters-open")})}else a.jqueryObj.closest(".vc_column_container").removeClass("tdw-filters-mobile"),jQuery("body").removeClass("tdw-filters");if(!0!==a.inComposer&&!1!==a.has_wp_query){window.onpopstate=function(b){if(null!==b.state)if("ajax"===a.jqueryObj.data("tdw-filter-load-type")){var c=[];(new URLSearchParams(window.location.search)).forEach(function(b,
f){-1!==f.indexOf("tdw_")&&jQuery(b.split(",")).each(function(b,d){b=a.jqueryObj.find('[data-term-slug="'+d+'"]');var g=a.jqueryObj.find('.select-filter-type option[value="'+d+'"]');b.length&&c.push({tax:f,slug:d,name:b.data("term-name")});g.length&&c.push({tax:f,slug:d,name:g.data("term-name")})})});jQuery(document).trigger("td_woo_filters_ajax_block_update",["on_popstate_reload",c]);a.jqueryObj.trigger("td_woo_filters_block_update",["on_popstate_reload",c])}else window.location.reload()};a.jqueryObj.on("td_woo_filters_block_update",
function(b,c,d){b="[td_woo_attribute_filter "+a.shortcodeAtts+"]";c=window.location.search;a.jqueryObj.is_ajax_running=!0;tdwFilter._ajaxLoadingStart(a.blockUid);jQuery.ajax({timeout:1E4,type:"POST",url:tdwFilter._getRestEndPoint("td-woo/do_job","tmp_blockUid="+a.blockUid+"&tdbLoadDataFromId="+a.templateDataId+"&tdbTemplateType="+a.templateType+c.replace("?","&")+"&td_woo_ajax=1&uuid="+tdwFilter._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdb_globals.wpRestNonce)},
cache:!0,data:{shortcode:b,replyHtml:""},dataType:"json",statusCode:{404:function(){console.log("tdwFilter - td_woo_filters_ajax_block_update - ERROR: 404 not found")},500:function(){console.log("tdwFilter - td_woo_filters_ajax_block_update - ERROR: 500 server error")}},success:function(b,c,f){null===b?console.log("tdwFilter - td_woo_filters_ajax_block_update - ERROR: Empty response received from server"):(a.jqueryObj.is_ajax_running=!1,tdwFilter._ajaxLoadingEnd(a.blockUid),_.has(b,"replyHtml")&&
a.jqueryObj.replaceWith(b.replyHtml),tdwFilter.deleteItem(a.blockUid),_.has(b,"replyJsForEval")&&window.eval(b.replyJsForEval))},error:function(a,b,c){console.log("tdwFilter - td_woo_filters_ajax_block_update - Error callback - textStatus: "+b+" errorThrown: "+c)}})});a.jqueryObj.on("click",".tdw-filters-clear-all",function(b){b.preventDefault();b.stopPropagation();b="ajax"===a.jqueryObj.data("tdw-filter-load-type");var c=new URLSearchParams(window.location.search),d=window.location.href;c.forEach(function(a,
b){-1!==b.indexOf("tdw_")&&(d=tdwFilter.removeQueryParam(d,b))});b?(jQuery(document).trigger("td_woo_filter_clear_all",{}),window.history.pushState({},"",d),a.jqueryObj.find(".tdw-filter-container").each(function(){var a=jQuery(this).find(".tdw-filter-items-wrapper");"SELECT"===a.prop("tagName")?a.find("option:selected").removeAttr("selected"):a.find("li").each(function(){jQuery(this).removeClass("selected")})}),jQuery(document).trigger("td_woo_filters_ajax_block_update",["td_woo_filter_clear_all",
{}]),a.jqueryObj.trigger("td_woo_filters_block_update",["td_woo_filter_clear_all",{}])):(window.history.pushState({},"",d),window.location.reload())});a.jqueryObj.on("click",".tdw-filter-item",function(b){var c=jQuery(this),d=c.parents("ul").data("taxonomy"),f=c.data("term-slug"),e=c.data("term-name");c.hasClass("selected")||c.hasClass("tdw-filter-link")?c.hasClass("selected")&&c.hasClass("tdw-filter-link")&&b.preventDefault():-1!==d.indexOf("tdw_")?(b=tdwFilter.removeQueryParam(window.location.href,
"product-page"),"ajax"===a.jqueryObj.data("tdw-filter-load-type")?(c.addClass("selected"),jQuery(document).trigger("td_woo_filter_add",{tax:d,term:f,term_name:e}),window.history.pushState({},"",tdwFilter.updateQuery(b,d,f)),jQuery(document).trigger("td_woo_filters_ajax_block_update",["td_woo_filter_add",{}]),a.jqueryObj.trigger("td_woo_filters_block_update",["td_woo_filter_add",{}])):window.location.href=tdwFilter.updateQuery(b,d,f)):console.log("invalid filter: "+d)});a.jqueryObj.on("change",".select-filter-type",
function(b){var c=jQuery(this);b=c.data("taxonomy");c=c.val();var d=jQuery("option:selected",this),f=d.data("term-name");(d=d.data("filter-link"))?window.location.href=d:-1!==b.indexOf("tdw_")?(d=tdwFilter.removeQueryParam(window.location.href,"product-page"),d=tdwFilter.removeQueryParam(d,b),"ajax"===a.jqueryObj.data("tdw-filter-load-type")?(jQuery(document).trigger("td_woo_filter_change",{tax:b,term:c,term_name:f}),window.history.pushState({},"",tdwFilter.updateQuery(d,b,c)),jQuery(document).trigger("td_woo_filters_ajax_block_update",
["td_woo_filter_change",{}]),a.jqueryObj.trigger("td_woo_filters_block_update",["td_woo_filter_change",{}])):window.location.href=tdwFilter.updateQuery(d,b,c)):console.log("invalid filter: "+b)});jQuery(document).on("td_woo_filter_remove",function(b,c){b=c.term;c=a.jqueryObj.find('[data-taxonomy="'+c.tax+'"]');"SELECT"===c.prop("tagName")?c.find("option:selected").removeAttr("selected"):c.find("li[data-term-slug="+b+"]").removeClass("selected")});a.jqueryObj.find(".tdw-multi-select-wrapper").each(function(){var b=
jQuery(this),c=b.find(".multi-select__selection");b.on("click",function(){jQuery(this).find(".multi-select").toggleClass("open")});b.find(".multi-select-options .multi-select-option").each(function(){var b=jQuery(this),f=b.data("term-name"),e=b.data("term-slug"),k=b.data("term-id"),l=b.parents(".multi-select-options").data("taxonomy"),m={name:f,slug:e,id:k,tax:l};b.hasClass("selected")&&c.append('<span class="'+e+'">'+f+"</span>");b.on("click",function(d){c.find(".no-selection").remove();c.find("."+
e).length||(c.append('<span class="'+e+'">'+f+"</span>"),b.addClass("selected"),a.jqueryObj.trigger("update",["td_woo_filter_update",m]))})})});a.jqueryObj.on("update",function(b,c,d){b=d.tax;c=d.slug;d=d.name;if(-1!==b.indexOf("tdw_")){var e=tdwFilter.removeQueryParam(window.location.href,"product-page");"ajax"===a.jqueryObj.data("tdw-filter-load-type")?(jQuery(document).trigger("td_woo_filter_add",{tax:b,term:c,term_name:d}),window.history.pushState({},"",tdwFilter.updateQuery(e,b,c)),jQuery(document).trigger("td_woo_filters_ajax_block_update",
["td_woo_filter_add",{}]),a.jqueryObj.trigger("td_woo_filters_block_update",["td_woo_filter_add",{}])):window.location.href=tdwFilter.updateQuery(e,b,c)}else console.log("invalid filter: "+b)});jQuery(document).on("click",function(b){b.target.classList.length&&(b.target.classList.contains("multi-select-options")||b.target.classList.contains("multi-select-option")||b.target.classList.contains("tdw-multi-select-wrapper")||b.target.classList.contains("multi-select__selection"))||a.jqueryObj.find(".multi-select").removeClass("open")});
if(!a.isAjaxCallback)jQuery(window).on("load",function(){if(tdwFiltersList.items.length)for(var b=0;b<tdwFiltersList.items.length;b++)tdwFiltersList.items[b].loadType=a.loadType});a._is_initialized=!0}}},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdwFilter.items.push(a);tdwFilter._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdwFilter.items.length;b++)if(tdwFilter.items[b].blockUid===a)return tdwFilter.items.splice(b,1),!0;return!1},updateQuery:function(a,
b,e){var f=new RegExp("([?&])"+b+"=.*?(&|$)","i"),c=-1!==a.indexOf("?")?"&":"?";return a.match(f)?(c=new URLSearchParams(window.location.search),a.replace(f,"$1"+b+"="+c.get(b)+","+e+"$2")):""===e?a:a+c+b+"="+e},removeQueryParam:function(a,b){return a.replace(new RegExp("([?&])"+b+"=.*?(&|$)","i"),"$1").replace(/[&|?]\s*$/,"")},_getUniqueID:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},_getRestEndPoint:function(a,
b){return _.isEmpty(window.tdb_globals.permalinkStructure)?window.tdb_globals.wpRestUrl+a+"&"+b:window.tdb_globals.wpRestUrl+a+"?"+b},_ajaxLoadingStart:function(a){var b=jQuery("."+a);a=jQuery("#"+a);a.addClass("td_block_inner_overflow");a.css("height",a.height());b.append('<div class="td-loader-gif td-loader-animation-start"></div>');tdLoadingBox.init(tds_theme_color_site_wide);setTimeout(function(){b.find(".td-loader-gif").removeClass("td-loader-animation-start").addClass("td-loader-animation-mid")},
50);a.addClass("td_animated_long td_fadeOut_to_1")},_ajaxLoadingEnd:function(a){var b=jQuery("."+a);b.find(".td-loader-gif").removeClass("td-loader-animation-mid").addClass("td-loader-animation-end");setTimeout(function(){b.find(".td-loader-gif").remove();tdLoadingBox.stop()},100);var e=jQuery("#"+a);e.removeClass("td_animated_long td_fadeOut_to_1");setTimeout(function(){b.find(".td_block_inner_overflow").removeClass("td_block_inner_overflow");e.css("height","auto")},50)}}})();jQuery().ready(function(){tdwFilter.init()});
var tdwLoop={};
(function(){tdwLoop={items:[],init:function(){tdwLoop.items=[]},item:function(){this.loadType=this.jqueryObj=this.blockAtts=this.blockUid=void 0;this._is_initialized=this.inComposer=!1},_initialize_item:function(a){!0!==a._is_initialized&&(jQuery(document).on("td_woo_filters_ajax_block_update",function(b,e,f){b=tdBlocks.tdGetBlockObjById(a.blockUid);var c=JSON.parse(b.atts);c.category="";c.tag="";c.td_woo_attributes_filters={};e=new URLSearchParams(window.location.search);var d={};"undefined"!==typeof c.current_term&&
"undefined"!==typeof c.current_term_tax&&("product_cat"!==c.current_term_tax||e.has("tdw_product_cat")||(c.category+=c.current_term),"product_tag"!==c.current_term_tax||e.has("tdw_product_tag")||(c.tag+=c.current_term),-1===c.current_term_tax.indexOf("pa_")||e.has("tdw_"+c.current_term_tax)||(c.td_woo_attributes_filters["tdw_"+c.current_term_tax]=c.current_term));e.forEach(function(a,b){d[b]=a});0<Object.keys(d).length&&jQuery.each(d,function(a,b){-1!==a.indexOf("tdw_")?("tdw_product_cat"===a&&(c.category=
""===c.category?b:c.category+(","+b)),"tdw_product_tag"===a&&(c.tag=b),-1!==a.indexOf("pa_")&&(c.td_woo_attributes_filters[a]=b)):("orderby"===a&&(c.sort=b),"s"===a&&(c.s=b))});b.atts=JSON.stringify(c);jQuery(this).hasClass("ajax-filter-disabled")||!0===b.is_ajax_running||(b.is_ajax_running=!0,b.td_current_page=1,tdBlocks.tdAjaxDoBlockRequest(b,"tdw_filter"))}),a._is_initialized=!0)},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdwLoop.items.push(a);tdwLoop._initialize_item(a)},
deleteItem:function(a){for(var b=0;b<tdwLoop.items.length;b++)if(tdwLoop.items[b].blockUid===a)return tdwLoop.items.splice(b,1),!0;return!1}}})();
jQuery().ready(function(){tdwLoop.init();jQuery(document).on("td_woo_ajax_block_update",function(a,b,e,f){a=jQuery.parseJSON(f);f=jQuery("."+b.id);var c=JSON.parse(b.atts);"tdw_filter"===e&&(b.found_posts=parseInt(a.total),b.post_count=parseInt(a.per_page),b.td_current_page=parseInt(a.current_page));e=c.ajax_pagination?c.ajax_pagination:"";var d=c.offset?parseInt(c.offset):0;d=parseInt(b.found_posts)-d;var g=parseInt(b.post_count);var h=parseInt(b.td_current_page);0===d?(c="No results to count",f.addClass("tdc-no-posts")):
(f.removeClass("tdc-no-posts"),b=g*h-g+1,g=Math.min(d,g*h),c="load_more"===c.ajax_pagination||"infinite"===c.ajax_pagination?"Showing 1 &ndash; "+g+" of "+d+" results":b===g?"Showing the "+g+" result of "+d+" results":"Showing "+b+" &ndash; "+g+" of "+d+" results");f.find(".tdw-result-count p").html(c);"numbered"===e&&"undefined"!==a.td_num_pagination_data&&(c=f.find(".page-nav"),c.length?c.replaceWith(a.td_num_pagination_data):f.append(a.td_num_pagination_data))})});var tdwFiltersList={};
(function(){tdwFiltersList={items:[],init:function(){tdwFiltersList.items=[]},item:function(){this.loadType=this.jqueryObj=this.blockUid=void 0;this.sampleData=!1;this.closeIcon="";this._is_initialized=this.inComposer=!1},_initialize_item:function(a){!0!==a._is_initialized&&!0!==a.inComposer&&!0!==a.sampleData&&(a.jqueryObj.on("click",".remove",function(b){b.preventDefault();b.stopPropagation();b=jQuery(this).parent().data("tax");var e=jQuery(this).parent().data("term-slug");jQuery(this).parents("li").hide();
jQuery(document).trigger("td_woo_filter_remove",{tax:b,term:e});var f=tdwFiltersList.removeQueryParam(window.location.href,"product-page");if("ajax"===tdwFiltersList.getItemObjById(a.blockUid).loadType){window.history.pushState({},"",tdwFiltersList.updateQuery(f,b,e));for(b=0;b<tdwFilter.items.length;b++)tdwFilter.items[b].jqueryObj.trigger("td_woo_filters_block_update",["td_woo_filter_remove",{}]);jQuery(document).trigger("td_woo_filters_ajax_block_update",["td_woo_filter_remove",{}])}else window.location.href=
tdwFiltersList.updateQuery(f,b,e)}),jQuery(document).on("td_woo_filter_add",function(b,e){b=e.tax;var f=e.term;e=e.term_name;a.jqueryObj.find(".tdw-filters-wrap ul").length||a.jqueryObj.find(".tdw-block-inner").append('<div class="tdw-filters-wrap"><ul></ul></div>');a.jqueryObj.find(".tdw-filters-wrap ul").append('<li><a href="#" data-tax="'+b+'" data-term-slug="'+f+'" data-term-name="'+e+'"><span class="remove">'+e+a.closeIcon+"</span></a></li>")}),jQuery(document).on("td_woo_filter_change",function(b,
e){b=e.tax;var f=e.term;e=e.term_name;var c=a.jqueryObj.find('[data-tax="'+b+'"]');c.length?void 0===e?c.parent("li").remove():c.replaceWith('<a href="#" data-tax="'+b+'" data-term-slug="'+f+'" data-term-name="'+e+'"><span class="remove">'+e+a.closeIcon+"</span></a>"):a.jqueryObj.find(".tdw-filters-wrap ul").append('<li><a href="#" data-tax="'+b+'" data-term-slug="'+f+'" data-term-name="'+e+'"><span class="remove">'+e+a.closeIcon+"</span></a></li>")}),jQuery(document).on("td_woo_filter_clear_all",
function(){a.jqueryObj.find(".tdw-filters-wrap ul").empty()}),jQuery(document).on("td_woo_filters_ajax_block_update",function(b,e,f){var c=new URLSearchParams(window.location.search),d=a.jqueryObj.find(".tdw-filters-wrap");"on_popstate_reload"===e&&(d.find("ul > li").each(function(){var a=jQuery(this),b=a.find("a").data("tax"),d=a.find("a").data("term-slug");c.has(b)?-1===c.get(b).indexOf(d)&&a.remove():a.remove()}),f.length&&f.forEach(function(b){d.find('[data-term-slug="'+b.slug+'"]').length||d.find("ul").append('<li><a href="" data-tax="'+
b.tax+'" data-term-slug="'+b.slug+'" data-term-name="'+b.name+'"><span class="remove">'+b.name+a.closeIcon+"</span></a></li>")}))}),window.onpopstate=function(b){if(null!==b.state)if("ajax"===a.loadType){var e=[];(new URLSearchParams(window.location.search)).forEach(function(b,c){-1!==c.indexOf("tdw_")&&jQuery(b.split(",")).each(function(b,f){b=a.jqueryObj.find('[data-term-slug="'+f+'"]');b.length&&e.push({tax:c,slug:f,name:b.data("term-name")})})});jQuery(document).trigger("td_woo_filters_ajax_block_update",
["on_popstate_reload",e]);a.jqueryObj.trigger("td_woo_filters_block_update",["on_popstate_reload",e])}else window.location.reload()},a._is_initialized=!0)},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdwFiltersList.items.push(a);tdwFiltersList._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdwFiltersList.items.length;b++)if(tdwFiltersList.items[b].blockUid===a)return tdwFiltersList.items.splice(b,1),!0;return!1},updateQuery:function(a,b,e){var f=
new RegExp("([?&])"+b+"=.*?(&|$)","i"),c=(new URLSearchParams(window.location.search)).get(b),d="";if(-1!==c.indexOf(",")){c=c.split(",");for(var g=0;g<c.length;g++)c[g]!==e&&(d+=c[g]+",");d=d.replace(/,\s*$/,"");return a.replace(f,"$1"+b+"="+d+"$2")}return a.replace(f,"$1").replace(/[&|?]\s*$/,"")},removeQueryParam:function(a,b){return a.replace(new RegExp("([?&])"+b+"=.*?(&|$)","i"),"$1").replace(/[&|?]\s*$/,"")},getItemIndex:function(a){var b=0,e=0;jQuery.each(tdwFiltersList.items,function(f,c){if(c.blockUid===
a)return e=b,!1;b++});return e},getItemObjById:function(a){return tdwFiltersList.items[tdwFiltersList.getItemIndex(a)]}}})();jQuery().ready(function(){tdwFiltersList.init()});
